# rx-template-appliedhttpclient
Репозиторий с шаблоном разработки «Прикладной HTTP клиент».

## Описание
Для реализации интеграций со стороними системами на проектах часто требуется вызывать методы сторонних веб сервисов, например, при интеграции с SAP PO/PI.
В рамках шаблона разработки реализована библиотека для отправки сообщений в сторонние системы.

Библиотека позволяет отправлять HTTP запросы, для взаимодействия с веб сервисами построеными как по технологии REST API, так и использующими протокол SOAP.

Реализованы методы Get, Post, Put, Delete. 

Методы аутентификации: 
1. Basic
2. Bearer
3. Ntlm

Типы тела запроса:
1. Json
2. Xml
3. Загрузка файла

Для обработки результата запроса определено 2 метода:
1. OnSuccess – выполняется в случае успешного выполнения запроса. Данный метод в себе содержит структуру ответа из следующих свойств:
  o	StatusCode – статус код запроса;
  o	Headers – заголовки ответа;
  o	Response – ответ на запрос в виде потока.
2. OnFail - выполняется в случае ошибки при выполнении запроса.

Пример подключения библиотеки и вызовов методов см. в Инструкция по использованию.docx

> [!NOTE]
> Замечания и пожеланию по развитию шаблона разработки фиксируйте через [Issues](https://github.com/DirectumCompany/rx-template-appliedhttpclient/issues).
При оформлении ошибки, опишите сценарий для воспроизведения. Для пожеланий приведите обоснование для описываемых изменений - частоту использования, бизнес-ценность, риски и/или эффект от реализации.
> 
> Внимание! Изменения будут вноситься только в новые версии.

## Варианты расширения функциональности на проектах
1. Создание своего HTTP клиента под разные нужды
2. Добавление метода аутентификации
3. Добавление методов загрузки файла 

## Порядок установки
Для работы требуется установленный Directum RX версии 4.0 и выше

## Установка для ознакомления
1. Склонировать репозиторий с rx-template-appliedhttpclient в папку

## Установка для использования на проекте
Возможные варианты

### A. Fork репозитория.
1. Сделать fork репозитория rx-template-appliedhttpclient для своей учетной записи.
2. Открыть созданный в п. 1 репозиторий в среде разработки Visual Studio.
3. Для сборки библиотеки и подключения в прикладном решении Directum RX, необходимо скачать библиотеку с репозитория и выполнить сборку решения.
Решение, скачанное с репозитория необходимо открыть в Visual Studio, после выполнить сборку. 
Для сборки решения необходимо выбрать зеленую стрелку «Запуск» и имя проекта на панели инструментов Visual Studio. В данном примере выбран проект AppliedHttpClientApp.
![Imgae alt](https://github.com/DirectumCompany/rx-template-appliedhttpclient/raw/main/img/1.png)
4. Подключить собранную библиотку в требуемый модуль системы Directum RX. Добавление сторонней библиотеки в Directum RX описано в справке. При добавление сторонней библиотеки необходимо добавить файл с расширением dll. Файлы с расширением pdb, в случае если такие имеются, добавлять не стоит, т.к они нужны для отладки решения в Visual Studio.
![Imgae alt](https://github.com/DirectumCompany/rx-template-appliedhttpclient/raw/main/img/2.png)

### B. Копирование репозитория в систему контроля версий.
Рекомендуемый вариант для проектов внедрения.
1. В системе контроля версий с поддержкой git создать новый репозиторий.
2. Склонировать репозиторий rx-template-appliedhttpclient в папку с ключом --mirror.
3. Перейти в папку из п. 2.
4. Импортировать клонированный репозиторий в систему контроля версий командой:
git push –mirror <Адрес репозитория из п. 1>
